# Web 组件文档

## 组件列表

### 通用组件 (src/components/common)

| 组件 | 文件 | 功能 |
|------|------|------|
| HoverButton | HoverButton/index.vue | 悬浮按钮 |
| NaiveProvider | NaiveProvider/index.vue | Naive UI 提供者 |
| PromptStore | PromptStore/index.vue | 提示词存储 |
| SelectionSend | SelectionSend/index.vue | 选择发送 |
| Setting | Setting/index.vue | 设置面板 |
| SvgIcon | SvgIcon/index.vue | SVG 图标 |
| UserAvatar | UserAvatar/index.vue | 用户头像 |

### 自定义组件 (src/components/custom)

| 组件 | 文件 | 功能 |
|------|------|------|
| GithubSite | GithubSite.vue | GitHub 站点链接 |

### 聊天组件 (src/views/chat/components)

| 组件 | 文件 | 功能 |
|------|------|------|
| Message | Message/index.vue | 消息组件 |
| Header | Header/index.vue | 头部组件 |
| BlenderNode | BlenderNode.vue | Blender 节点组件 |
| NodeDataView | NodeDataView.vue | 节点数据视图 |
| VariableRichInput | VariableRichInput.vue | 变量富输入框 |

---

## 1. HoverButton

**文件**：`src/components/common/HoverButton/index.vue`

**功能**：悬浮按钮组件，支持悬停效果和图标显示。

### Props

| 属性 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| icon | String | - | 图标名称 |
| size | String | 'default' | 按钮大小（small/default/large） |

### 使用示例

```vue
<HoverButton icon="ri:delete-bin-line" size="small" @click="handleDelete" />
```

---

## 2. NaiveProvider

**文件**：`src/components/common/NaiveProvider/index.vue`

**功能**：Naive UI 提供者，提供全局 Naive UI 配置。

### 功能

- 配置 Naive UI 主题
- 配置 Naive UI 语言
- 配置 Naive UI 组件默认值

### 使用示例

```vue
<NaiveProvider>
  <RouterView />
</NaiveProvider>
```

---

## 3. PromptStore

**文件**：`src/components/common/PromptStore/index.vue`

**功能**：提示词存储组件，用于管理和使用提示词模板。

### Props

| 属性 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| prompts | Array | [] | 提示词列表 |

### 事件

| 事件 | 参数 | 描述 |
|------|------|------|
| select | prompt | 选择提示词 |

### 使用示例

```vue
<PromptStore :prompts="prompts" @select="handleSelect" />
```

---

## 4. SelectionSend

**文件**：`src/components/common/SelectionSend/index.vue`

**功能**：选择发送组件，用于发送选中的文本。

### Props

| 属性 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| text | String | '' | 要发送的文本 |

### 事件

| 事件 | 参数 | 描述 |
|------|------|------|
| send | text | 发送文本 |

### 使用示例

```vue
<SelectionSend :text="selectedText" @send="handleSend" />
```

---

## 5. Setting

**文件**：`src/components/common/Setting/index.vue`

**功能**：设置面板组件，用于配置应用设置。

### 功能

- AI 服务商配置
- 模型选择
- 系统提示词配置
- 输出详细程度配置
- 温度、Top P 配置

### 使用示例

```vue
<Setting @update="handleUpdate" />
```

---

## 6. SvgIcon

**文件**：`src/components/common/SvgIcon/index.vue`

**功能**：SVG 图标组件，支持 Iconify 图标库。

### Props

| 属性 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| icon | String | - | 图标名称 |
| size | String | '1em' | 图标大小 |

### 使用示例

```vue
<SvgIcon icon="ri:home-line" size="24" />
```

---

## 7. UserAvatar

**文件**：`src/components/common/UserAvatar/index.vue`

**功能**：用户头像组件，显示用户头像。

### Props

| 属性 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| avatar | String | '' | 头像 URL |
| name | String | '' | 用户名称 |
| size | String | 'default' | 头像大小 |

### 使用示例

```vue
<UserAvatar :avatar="user.avatar" :name="user.name" size="large" />
```

---

## 8. GithubSite

**文件**：`src/components/custom/GithubSite.vue`

**功能**：GitHub 站点链接组件，显示 GitHub 仓库链接。

### Props

| 属性 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| url | String | '' | GitHub 仓库 URL |

### 使用示例

```vue
<GithubSite url="https://github.com/your-repo" />
```

---

## 9. Message

**文件**：`src/views/chat/components/Message/index.vue`

**功能**：消息组件，显示用户和 AI 的消息。

### Props

| 属性 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| message | Object | {} | 消息对象 |
| index | Number | 0 | 消息索引 |

### 消息对象结构

```typescript
{
  uuid: number
  dateTime: string
  text: string
  inversion: boolean
  error: boolean
  conversationOptions: {
    conversationId?: string
    parentMessageId?: string
  } | null
  requestOptions: {
    prompt: string
  }
}
```

### 功能

- 显示用户消息
- 显示 AI 回答
- 显示思考过程
- 代码高亮
- Markdown 渲染
- 导出消息

### 使用示例

```vue
<Message 
  :message="message" 
  :index="index" 
  @export="handleExport" 
/>
```

---

## 10. Header

**文件**：`src/views/chat/components/Header/index.vue`

**功能**：头部组件，显示标题、模型、设置等。

### 功能

- 显示标题
- 显示当前模型
- 显示设置按钮
- 显示主题切换按钮
- 显示语言切换按钮

### 使用示例

```vue
<Header @settings="handleSettings" @theme="handleTheme" />
```

---

## 11. BlenderNode

**文件**：`src/views/chat/components/BlenderNode.vue`

**功能**：Blender 节点组件，显示 Blender 节点信息。

### Props

| 属性 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| nodeData | Object | {} | 节点数据 |

### 节点数据结构

```typescript
{
  nodes: string
  filename: string
  version: string
  node_type: string
  tokens: number
}
```

### 功能

- 显示节点信息
- 显示节点类型
- 显示文件名
- 显示版本
- 显示 token 数量

### 使用示例

```vue
<BlenderNode :nodeData="nodeData" />
```

---

## 12. NodeDataView

**文件**：`src/views/chat/components/NodeDataView.vue`

**功能**：节点数据视图组件，显示和编辑节点数据。

### Props

| 属性 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| data | String | '' | 节点数据 |
| readonly | Boolean | false | 是否只读 |

### 功能

- 显示节点数据
- 编辑节点数据
- 格式化 JSON
- 语法高亮

### 使用示例

```vue
<NodeDataView :data="nodeData" :readonly="true" />
```

---

## 13. VariableRichInput

**文件**：`src/views/chat/components/VariableRichInput.vue`

**功能**：变量富输入框组件，支持变量插入和编辑。

### Props

| 属性 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| modelValue | String | '' | 输入值 |
| placeholder | String | '' | 占位符 |
| variables | Array | [] | 可用变量列表 |

### 事件

| 事件 | 参数 | 描述 |
|------|------|------|
| update:modelValue | value | 更新值 |
| variable-insert | variable | 插入变量 |

### 功能

- 变量高亮显示
- 变量自动补全
- 拖拽插入变量
- 变量替换预览

### 使用示例

```vue
<VariableRichInput 
  v-model="prompt" 
  :variables="variables" 
  @variable-insert="handleInsert"
/>
```

---

## 组件通信

### Props 传递

```vue
<!-- 父组件 -->
<ChildComponent :prop="value" />

<!-- 子组件 -->
<script setup lang="ts">
const props = defineProps<{
  prop: string
}>()
</script>
```

### 事件发射

```vue
<!-- 子组件 -->
<script setup lang="ts">
const emit = defineEmits<{
  (e: 'update', value: string): void
}>()

function handleUpdate() {
  emit('update', newValue)
}
</script>

<!-- 父组件 -->
<ChildComponent @update="handleUpdate" />
```

### Provide/Inject

```vue
<!-- 祖先组件 -->
<script setup lang="ts">
import { provide } from 'vue'

provide('key', value)
</script>

<!-- 后代组件 -->
<script setup lang="ts">
import { inject } from 'vue'

const value = inject('key')
</script>
```

---

## 组件样式

### Tailwind CSS

```vue
<template>
  <div class="flex items-center gap-2 p-4 bg-white dark:bg-gray-800 rounded-lg">
    <!-- 内容 -->
  </div>
</template>
```

### Less

```vue
<style lang="less" scoped>
.component {
  padding: 1rem;
  background: white;
  border-radius: 0.5rem;
  
  .dark & {
    background: #1f2937;
  }
}
</style>
```

---

## 组件测试

### 单元测试

```typescript
import { mount } from '@vue/test-utils'
import { describe, it, expect } from 'vitest'
import Component from './Component.vue'

describe('Component', () => {
  it('renders correctly', () => {
    const wrapper = mount(Component, {
      props: { prop: 'value' }
    })
    expect(wrapper.text()).toContain('value')
  })
})
```

---

## 组件最佳实践

1. **命名规范**：使用 PascalCase 命名组件
2. **Props 验证**：使用 TypeScript 定义 Props 类型
3. **事件命名**：使用 kebab-case 命名事件
4. **样式隔离**：使用 scoped 样式
5. **性能优化**：使用 v-memo 优化渲染
6. **可访问性**：添加 ARIA 标签
7. **错误处理**：添加错误边界

---

## 组件文档索引

- [01-主界面文档](./01-主界面文档.md)
- [02-组件文档](./02-组件文档.md)
- [03-Store 文档](./03-Store文档.md)
- [04-API 文档](./04-API文档.md)
- [05-Hooks 文档](./05-Hooks文档.md)
- [06-路由文档](./06-路由文档.md)